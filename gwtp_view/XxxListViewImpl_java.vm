/*
 * Created on $today.date ( Date ISO $today.date("yyyy-MM-dd") - Time $today.time )
 * Generated by Telosys ( http://www.telosys.org/ ) version $generator.version
 */
## Lower case entity name used in import declaration
#set( $lowerCaseEntityName = $fn.toLowerCase($entity.name))
## Upper case entity name used in NameTokens resolution (ui routing)
#set( $upperCaseEntityName = $fn.toUpperCase($entity.name))
#set( $formRootName = "${upperCaseEntityName}_FORM" )
#set( $listRootName = "${upperCaseEntityName}_LIST" )
## Package declaration
package ${target.javaPackageFromFolder(${SRC})};

import javax.inject.Inject;

import com.google.gwt.uibinder.client.UiBinder;
import com.google.gwt.user.cellview.client.TextColumn;
import com.google.gwt.user.client.ui.Widget;
import ${ROOT_PKG}.client.application.content.${lowerCaseEntityName}.list.${entity.name}ListPresenter.${entity.name}ListView;
import ${ROOT_PKG}.client.util.common.list.view.AbstractListView;
import ${ROOT_PKG}.shared.dto.${entity.name}Dto;

public class ${entity.name}ListViewImpl extends AbstractListView<${entity.name}ListPresenter, ${entity.name}Dto> implements ${entity.name}ListView {
	interface Binder extends UiBinder<Widget, ${entity.name}ListViewImpl> {
	}

	@Inject
	${entity.name}ListViewImpl(Binder uiBinder) {
		super();
		initWidget(uiBinder.createAndBindUi(this));
		initCellTable();
	}

	@Override
	public void initCellTable() {
## For each field, define the column
#set( $uncapitalizedEntityName = $fn.uncapitalize(${entity.name}))
#foreach( $field in ${entity.attributes} )
#set( $capitalizedFieldName = $fn.capitalize(${field.name}))
		final TextColumn<${entity.name}Dto> col${capitalizedFieldName} = new TextColumn<${entity.name}Dto>() {

			@Override
			public String getValue(final ${entity.name}Dto object) {
				return String.valueOf(object.get${capitalizedFieldName}());
			}
		};
		table.addColumn(col${capitalizedFieldName}, messages.${uncapitalizedEntityName}List${capitalizedFieldName}());
#end
		// Actions column
		addDeletionColumn();
		addUpdateColumn();
		provider.addDataDisplay(table);
	}
}